<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenFit - AI Diet & Workout Recommendation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0b132b, #1c2541, #3a506b);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        /* Auth Page */
        #authPage {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .auth-box {
            width: 100%;
            max-width: 350px;
            padding: 32px;
            background: rgba(12, 18, 28, 0.95);
            border-radius: 18px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 100, 0.15);
            box-shadow: 0 0 25px rgba(0, 255, 100, 0.1);
            text-align: center;
            transition: 0.3s;
        }

        .logo {
            font-size: 36px;
            font-weight: bold;
            color: #00ff75;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 15px;
            color: #cfcfcf;
            margin-bottom: 25px;
        }

        .label {
            text-align: left;
            font-size: 14px;
            color: #00ff75;
            margin-bottom: 5px;
            margin-top: 10px;
            display: block;
        }

        .input-box {
            width: 100%;
            padding: 12px;
            background: white;
            border-radius: 10px;
            border: none;
            outline: none;
            font-size: 14px;
            margin-bottom: 8px;
            box-sizing: border-box;
        }

        .dark-input {
            background: #0d1117;
            color: white;
            border: 1px solid #222;
        }

        select.input-box {
            cursor: pointer;
        }

        .btn {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            margin-top: 20px;
            background: linear-gradient(90deg, #00ff75, #00cc62);
            border: none;
            font-weight: 600;
            font-size: 16px;
            color: #000;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn:hover {
            background: linear-gradient(90deg, #00cc62, #00ff75);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 117, 0.3);
        }

        .switch {
            margin-top: 15px;
            font-size: 14px;
            color: #d3d3d3;
        }

        .switch a {
            color: #00ff75;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .switch a:hover {
            text-decoration: underline;
        }

        /* Profile Page */
        #profilePage {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .profile-page {
            width: 100%;
            max-width: 600px;
        }

        .profile-box {
            background: rgba(12, 18, 28, 0.95);
            border-radius: 18px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 100, 0.15);
            box-shadow: 0 0 25px rgba(0, 255, 100, 0.1);
            padding: 32px;
            color: #cfcfcf;
        }

        .profile-header {
            font-size: 28px;
            font-weight: bold;
            color: #00ff75;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-row .form-group {
            margin-bottom: 0;
        }

        /* Plans Page */
        #plansPage {
            width: 100%;
        }

        .plans-page {
            width: 100%;
            max-width: 1200px;
            margin: auto;
            padding: 20px;
        }

        .plans-container {
            background: rgba(12, 18, 28, 0.95);
            border-radius: 18px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 100, 0.15);
            box-shadow: 0 0 25px rgba(0, 255, 100, 0.1);
            padding: 32px;
            color: #cfcfcf;
        }

        .plans-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(0, 255, 100, 0.2);
            padding-bottom: 20px;
        }

        .plans-title {
            font-size: 28px;
            font-weight: bold;
            color: #00ff75;
        }

        .logout-btn {
            padding: 10px 20px;
            background: rgba(255, 50, 50, 0.8);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255, 100, 100, 1);
        }

        .user-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: rgba(0, 255, 100, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #00ff75;
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #00ff75;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(0, 255, 100, 0.2);
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: #cfcfcf;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: 0.3s;
        }

        .tab-btn.active {
            color: #00ff75;
            border-bottom-color: #00ff75;
        }

        .tab-btn:hover {
            color: #00ff75;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .week-schedule {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .day-card {
            background: rgba(0, 255, 100, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 100, 0.2);
        }

        .day-header {
            font-size: 18px;
            font-weight: bold;
            color: #00ff75;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(0, 255, 100, 0.3);
            padding-bottom: 10px;
        }

        .day-content {
            list-style: none;
        }

        .day-content li {
            padding: 8px 0;
            color: #cfcfcf;
            font-size: 13px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-content li:last-child {
            border-bottom: none;
        }

        .bmi-info {
            background: rgba(0, 200, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #00d4ff;
        }

        .bmi-text {
            color: #cfcfcf;
            font-size: 14px;
            line-height: 1.6;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .user-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .week-schedule {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .plans-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- AUTH PAGE -->
        <div id="authPage">
            <div class="auth-box">
                <div class="logo">GenFit</div>
                <div class="subtitle" id="subtitle">Welcome Back</div>

                <!-- LOGIN FORM -->
                <div id="loginForm">
                    <div class="label">Email</div>
                    <input type="email" class="input-box" id="loginEmail" placeholder="Enter email">

                    <div class="label">Password</div>
                    <input type="password" class="input-box dark-input" id="loginPassword" placeholder="Enter password">

                    <button class="btn" onclick="handleLogin()">Login</button>

                    <div class="switch">
                        Don't have an account? <a onclick="toggleForm()">Sign up</a>
                    </div>
                </div>

                <!-- SIGNUP FORM -->
                <div id="signupForm" style="display:none;">
                    <div class="label">Full Name</div>
                    <input type="text" class="input-box" id="signupName" placeholder="Enter full name">

                    <div class="label">Email</div>
                    <input type="email" class="input-box" id="signupEmail" placeholder="Enter email">

                    <div class="label">Password</div>
                    <input type="password" class="input-box dark-input" id="signupPassword" placeholder="Create password">

                    <div class="label">Confirm Password</div>
                    <input type="password" class="input-box dark-input" id="confirmPassword" placeholder="Confirm password">

                    <button class="btn" onclick="handleSignup()">Sign Up</button>

                    <div class="switch">
                        Already have an account? <a onclick="toggleForm()">Login</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- PROFILE PAGE -->
        <div id="profilePage" class="hidden">
            <div class="profile-page">
                <div class="profile-box">
                    <div class="profile-header">üìä Complete Your Profile</div>

                    <div class="form-group">
                        <label class="label">Age</label>
                        <input type="number" class="input-box" id="profileAge" placeholder="Enter your age" min="1" max="120">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="label">Weight (kg)</label>
                            <input type="number" class="input-box" id="profileWeight" placeholder="Enter weight" min="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="label">Height (cm)</label>
                            <input type="number" class="input-box" id="profileHeight" placeholder="Enter height" min="1" step="0.1">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="label">Gender</label>
                            <select class="input-box" id="profileGender">
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="label">Lifestyle</label>
                            <select class="input-box" id="profileLifestyle">
                                <option value="">Select lifestyle</option>
                                <option value="sedentary">Sedentary (little exercise)</option>
                                <option value="light">Light (1-3 days/week)</option>
                                <option value="moderate">Moderate (3-5 days/week)</option>
                                <option value="very-active">Very Active (6-7 days/week)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="label">Fitness Goal</label>
                        <select class="input-box" id="profileGoal">
                            <option value="">Select your goal</option>
                            <option value="weight-loss">Weight Loss</option>
                            <option value="muscle-gain">Muscle Gain</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="endurance">Endurance</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="label">Dietary Preference</label>
                        <select class="input-box" id="profileDiet">
                            <option value="">Select dietary preference</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="non-vegetarian">Non-Vegetarian</option>
                            <option value="vegan">Vegan</option>
                            <option value="no-preference">No Preference</option>
                        </select>
                    </div>

                    <button class="btn" onclick="saveProfile()">Generate My Plans</button>
                </div>
            </div>
        </div>

        <!-- PLANS PAGE -->
        <div id="plansPage" class="hidden">
            <div class="plans-page">
                <div class="plans-container">
                    <div class="plans-header">
                        <div>
                            <div class="plans-title">üí™ Your Personalized Plans</div>
                        </div>
                        <button class="logout-btn" onclick="logout()">Logout</button>
                    </div>

                    <div class="user-stats">
                        <div class="stat-box">
                            <div class="stat-label">Name</div>
                            <div class="stat-value" id="displayName">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">BMI</div>
                            <div class="stat-value" id="displayBMI">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Daily Calories</div>
                            <div class="stat-value" id="displayCalories">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Goal</div>
                            <div class="stat-value" id="displayGoal">-</div>
                        </div>
                    </div>

                    <div class="bmi-info">
                        <div class="bmi-text" id="bmiInfo"></div>
                    </div>

                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTab('workout')">üèãÔ∏è Workout</button>
                        <button class="tab-btn" onclick="switchTab('diet')">ü•ó Diet</button>
                        <button class="tab-btn" onclick="switchTab('nutrition')">üìã Nutrition</button>
                    </div>

                    <!-- Workout Tab -->
                    <div id="workout" class="tab-content active">
                        <div class="week-schedule" id="workoutSchedule"></div>
                    </div>

                    <!-- Diet Tab -->
                    <div id="diet" class="tab-content">
                        <div class="week-schedule" id="dietSchedule"></div>
                    </div>

                    <!-- Nutrition Tips Tab -->
                    <div id="nutrition" class="tab-content">
                        <div id="nutritionTips"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem('genfit_users')) || [];
        let currentUser = null;

        // Toggle between Login and Signup
        function toggleForm() {
            const login = document.getElementById("loginForm");
            const signup = document.getElementById("signupForm");
            const subtitle = document.getElementById("subtitle");

            if (login.style.display === "none") {
                login.style.display = "block";
                signup.style.display = "none";
                subtitle.innerText = "Welcome Back";
            } else {
                login.style.display = "none";
                signup.style.display = "block";
                subtitle.innerText = "Create Account";
            }
        }

        // Handle Login
        function handleLogin() {
            const email = document.getElementById("loginEmail").value.trim();
            const password = document.getElementById("loginPassword").value;

            if (!email || !password) {
                alert("Please fill all fields");
                return;
            }

            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                currentUser = user;
                localStorage.setItem('genfit_currentUser', JSON.stringify(currentUser));
                
                if (user.profile) {
                    showPlansPage();
                } else {
                    showProfilePage();
                }
            } else {
                alert("Invalid email or password");
            }
        }

        // Handle Signup
        function handleSignup() {
            const name = document.getElementById("signupName").value.trim();
            const email = document.getElementById("signupEmail").value.trim();
            const password = document.getElementById("signupPassword").value;
            const confirmPassword = document.getElementById("confirmPassword").value;

            if (!name || !email || !password || !confirmPassword) {
                alert("Please fill all fields");
                return;
            }

            if (password !== confirmPassword) {
                alert("Passwords do not match");
                return;
            }

            if (users.find(u => u.email === email)) {
                alert("Email already registered");
                return;
            }

            const newUser = {
                id: Date.now(),
                name,
                email,
                password,
                profile: null,
                createdAt: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('genfit_users', JSON.stringify(users));

            alert("Account created successfully! Please login.");
            toggleForm();
            clearForms();
        }

        // Show Profile Page
        function showProfilePage() {
            document.getElementById("authPage").classList.add("hidden");
            document.getElementById("profilePage").classList.remove("hidden");
            document.getElementById("plansPage").classList.add("hidden");
        }

        // Save Profile and Generate Plans
        function saveProfile() {
            const age = document.getElementById("profileAge").value;
            const weight = parseFloat(document.getElementById("profileWeight").value);
            const height = parseFloat(document.getElementById("profileHeight").value);
            const gender = document.getElementById("profileGender").value;
            const lifestyle = document.getElementById("profileLifestyle").value;
            const goal = document.getElementById("profileGoal").value;
            const diet = document.getElementById("profileDiet").value;

            if (!age || !weight || !height || !gender || !lifestyle || !goal || !diet) {
                alert("Please fill all fields");
                return;
            }

            const profile = {
                age: parseInt(age),
                weight,
                height,
                gender,
                lifestyle,
                goal,
                diet,
                bmi: calculateBMI(weight, height),
                dailyCalories: calculateCalories(weight, height, age, gender, lifestyle, goal),
                createdAt: new Date().toISOString()
            };

            currentUser.profile = profile;
            
            // Update in users array
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            users[userIndex] = currentUser;
            localStorage.setItem('genfit_users', JSON.stringify(users));
            localStorage.setItem('genfit_currentUser', JSON.stringify(currentUser));

            showPlansPage();
        }

        // Calculate BMI
        function calculateBMI(weight, height) {
            const heightInMeters = height / 100;
            return (weight / (heightInMeters * heightInMeters)).toFixed(1);
        }

        // Calculate Daily Calories
        function calculateCalories(weight, height, age, gender, lifestyle, goal) {
            let bmr;
            
            if (gender === 'male') {
                bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }

            const activityFactors = {
                sedentary: 1.2,
                light: 1.375,
                moderate: 1.55,
                'very-active': 1.725
            };

            let tdee = bmr * activityFactors[lifestyle];

            if (goal === 'weight-loss') {
                tdee *= 0.85;
            } else if (goal === 'muscle-gain') {
                tdee *= 1.1;
            }

            return Math.round(tdee);
        }

        // Show Plans Page
        function showPlansPage() {
            document.getElementById("authPage").classList.add("hidden");
            document.getElementById("profilePage").classList.add("hidden");
            document.getElementById("plansPage").classList.remove("hidden");

            displayUserStats();
            generateWorkoutPlan();
            generateDietPlan();
            generateNutritionTips();
        }

        // Display User Stats
        function displayUserStats() {
            const p = currentUser.profile;
            const bmiStatus = getBMIStatus(p.bmi);

            document.getElementById("displayName").textContent = currentUser.name;
            document.getElementById("displayBMI").textContent = p.bmi;
            document.getElementById("displayCalories").textContent = p.dailyCalories + " kcal";
            document.getElementById("displayGoal").textContent = capitalizeGoal(p.goal);

            document.getElementById("bmiInfo").innerHTML = `
                <strong>BMI: ${p.bmi} - ${bmiStatus}</strong><br>
                Your BMI indicates a ${bmiStatus.toLowerCase()} health status. 
                Combined with your ${capitalizeGoal(p.goal)} goal and ${p.lifestyle} lifestyle, 
                your personalized plan is designed to help you achieve optimal results. 
                Daily Calorie Target: <strong>${p.dailyCalories} kcal</strong>
            `;
        }

        function getBMIStatus(bmi) {
            if (bmi < 18.5) return "Underweight";
            if (bmi < 25) return "Normal Weight";
            if (bmi < 30) return "Overweight";
            return "Obese";
        }

        // Generate Workout Plan
        function generateWorkoutPlan() {
            const p = currentUser.profile;
            const plans = {
                'weight-loss': {
                    Monday: ['30 min Cardio (HIIT)', 'Core exercises: 3x12 crunches', 'Stretch & cool down'],
                    Tuesday: ['Upper body strength', 'Bench press: 4x8', 'Rows: 4x8', 'Push-ups: 3x10'],
                    Wednesday: ['45 min Running or Cycling', 'Light stretching'],
                    Thursday: ['Lower body strength', 'Squats: 4x8', 'Lunges: 3x10', 'Leg press: 4x8'],
                    Friday: ['30 min HIIT Training', 'Burpees, Jump rope, Mountain climbers'],
                    Saturday: ['30 min Light Cardio', 'Yoga or Pilates: 30 min'],
                    Sunday: ['Rest Day', 'Meal prep & hydration']
                },
                'muscle-gain': {
                    Monday: ['Chest & Triceps', 'Bench Press: 4x6', 'Incline Dumbbell: 4x8', 'Cable Flies: 3x10'],
                    Tuesday: ['Back & Biceps', 'Deadlifts: 4x5', 'Barbell Rows: 4x6', 'Curls: 3x8'],
                    Wednesday: ['Legs', 'Squats: 4x6', 'Romanian Deadlifts: 4x8', 'Leg Press: 3x8'],
                    Thursday: ['Shoulders & Arms', 'Military Press: 4x6', 'Lateral Raises: 3x10', 'Dips: 3x8'],
                    Friday: ['Full Body', 'Compound movements with heavy weight'],
                    Saturday: ['Accessories', 'Isolation exercises: 3x12 reps'],
                    Sunday: ['Rest & Recovery', 'Protein intake & sleep']
                },
                'maintenance': {
                    Monday: ['Strength Training', 'Full body: 3x8-10 reps'],
                    Tuesday: ['30 min Cardio', 'Walking, running or cycling'],
                    Wednesday: ['Core & Flexibility', 'Yoga or Pilates: 45 min'],
                    Thursday: ['Strength Training', 'Full body: 3x8-10 reps'],
                    Friday: ['30 min Cardio', 'Variety of exercises'],
                    Saturday: ['Outdoor Activity', 'Sports, hiking, or swimming'],
                    Sunday: ['Rest Day', 'Light stretching']
                },
                'endurance': {
                    Monday: ['Long Run', '45-60 min at easy pace'],
                    Tuesday: ['Speed Work', 'Intervals: 5x3 min at high intensity'],
                    Wednesday: ['Cross-training', 'Swimming or Cycling: 30 min'],
                    Thursday: ['Tempo Run', '20-30 min at moderate-high pace'],
                    Friday: ['Easy Run', '30 min easy pace'],
                    Saturday: ['Long Distance', '60-90 min at conversational pace'],
                    Sunday: ['Rest & Recovery', 'Stretching & hydration']
                }
            };

            const plan = plans[p.goal] || plans['maintenance'];
            const html = Object.entries(plan).map(([day, exercises]) => `
                <div class="day-card">
                    <div class="day-header">${day}</div>
                    <ul class="day-content">
                        ${exercises.map(ex => `<li>‚úì ${ex}</li>`).join('')}
                    </ul>
                </div>
            `).join('');

            document.getElementById("workoutSchedule").innerHTML = html;
        }

        // Generate Diet Plan
        function generateDietPlan() {
            const p = currentUser.profile;
            const dietPlans = {
                'weight-loss': {
                    Monday: ['Breakfast: Oats with berries (350 cal)', 'Lunch: Grilled chicken + salad (450 cal)', 'Dinner: Fish with vegetables (400 cal)', 'Snacks: Green tea, yogurt'],
                    Tuesday: ['Breakfast: Egg whites + toast (320 cal)', 'Lunch: Turkey sandwich + veggies (420 cal)', 'Dinner: Lean beef + brown rice (420 cal)', 'Snacks: Fruits, nuts'],
                    Wednesday: ['Breakfast: Protein smoothie (380 cal)', 'Lunch: Salmon salad (460 cal)', 'Dinner: Chicken soup (380 cal)', 'Snacks: Green juice, berries'],
                    Thursday: ['Breakfast: Pancakes + protein (400 cal)', 'Lunch: Shrimp & vegetables (430 cal)', 'Dinner: Turkey meatballs (400 cal)', 'Snacks: Greek yogurt'],
                    Friday: ['Breakfast: Chia pudding (360 cal)', 'Lunch: Tuna salad (440 cal)', 'Dinner: Baked chicken (420 cal)', 'Snacks: Fruit, herbal tea'],
                    Saturday: ['Breakfast: Vegetable omelet (380 cal)', 'Lunch: Grilled fish (450 cal)', 'Dinner: Lean pork (410 cal)', 'Snacks: Nuts, vegetables'],
                    Sunday: ['Breakfast: Protein pancakes (390 cal)', 'Lunch: Turkey & quinoa (440 cal)', 'Dinner: Baked salmon (430 cal)', 'Snacks: Fruits, smoothie']
                },
                'muscle-gain': {
                    Monday: ['Breakfast: Oats + eggs + banana (650 cal)', 'Snack: Protein shake (300 cal)', 'Lunch: Rice + chicken + veggies (700 cal)', 'Snack: Nuts + fruit (250 cal)', 'Dinner: Pasta + beef + salad (750 cal)'],
                    Tuesday: ['Breakfast: Pancakes + protein powder (700 cal)', 'Snack: Milk + almonds (320 cal)', 'Lunch: Fish + sweet potato (720 cal)', 'Snack: Protein bar (250 cal)', 'Dinner: Rice + turkey (780 cal)'],
                    Wednesday: ['Breakfast: Oats + eggs + granola (680 cal)', 'Snack: Shake + banana (310 cal)', 'Lunch: Chicken + brown rice (710 cal)', 'Snack: Greek yogurt + nuts (280 cal)', 'Dinner: Lean meat + potatoes (800 cal)'],
                    Thursday: ['Breakfast: Cereal + milk + fruit (720 cal)', 'Snack: Protein smoothie (330 cal)', 'Lunch: Tuna + rice + veggies (700 cal)', 'Snack: Peanut butter toast (290 cal)', 'Dinner: Salmon + sweet potato (810 cal)'],
                    Friday: ['Breakfast: Eggs + toast + juice (700 cal)', 'Snack: Shake + granola (340 cal)', 'Lunch: Beef + rice (730 cal)', 'Snack: Nuts + fruit (270 cal)', 'Dinner: Chicken + pasta (790 cal)'],
                    Saturday: ['Breakfast: Oats + protein + berries (710 cal)', 'Snack: Milk + nuts (320 cal)', 'Lunch: Turkey + sweet potato (720 cal)', 'Snack: Protein bar + banana (300 cal)', 'Dinner: Steak + rice (820 cal)'],
                    Sunday: ['Breakfast: Pancakes + eggs (730 cal)', 'Snack: Shake + oats (350 cal)', 'Lunch: Fish + potatoes (740 cal)', 'Snack: Greek yogurt + almonds (300 cal)', 'Dinner: Pork + vegetables (800 cal)']
                },
                'maintenance': {
                    Monday: ['Breakfast: Balanced meal (400 cal)', 'Lunch: Mixed proteins & carbs (500 cal)', 'Dinner: Vegetables & protein (450 cal)', 'Snacks: Fruits, yogurt'],
                    Tuesday: ['Breakfast: Eggs & toast (420 cal)', 'Lunch: Chicken & rice (510 cal)', 'Dinner: Fish & veggies (460 cal)', 'Snacks: Nuts, tea'],
                    Wednesday: ['Breakfast: Oats & fruit (410 cal)', 'Lunch: Turkey & salad (520 cal)', 'Dinner: Pasta & veggies (440 cal)', 'Snacks: Smoothie, berries'],
                    Thursday: ['Breakfast: Pancakes (430 cal)', 'Lunch: Beef & potatoes (530 cal)', 'Dinner: Shrimp & rice (450 cal)', 'Snacks: Yogurt, nuts'],
                    Friday: ['Breakfast: Smoothie bowl (420 cal)', 'Lunch: Salmon & veggies (540 cal)', 'Dinner: Chicken & sweet potato (460 cal)', 'Snacks: Fruit, granola'],
                    Saturday: ['Breakfast: Omelet & toast (440 cal)', 'Lunch: Tuna & brown rice (520 cal)', 'Dinner: Lean meat & salad (470 cal)', 'Snacks: Nuts, tea'],
                    Sunday: ['Breakfast: Waffles & berries (450 cal)', 'Lunch: Turkey & quinoa (530 cal)', 'Dinner: Fish & vegetables (480 cal)', 'Snacks: Smoothie, yogurt']
                },
                'endurance': {
                    Monday: ['Breakfast: High carbs + protein (600 cal)', 'Pre-run: Banana + oats (250 cal)', 'Lunch: Pasta + veggies (650 cal)', 'Post-run: Recovery shake (300 cal)', 'Dinner: Rice + chicken (600 cal)'],
                    Tuesday: ['Breakfast: Oats + fruit (580 cal)', 'Snack: Energy bar (200 cal)', 'Lunch: Rice + turkey (640 cal)', 'Snack: Sports drink (150 cal)', 'Dinner: Fish + sweet potato (620 cal)'],
                    Wednesday: ['Breakfast: Cereal + milk (600 cal)', 'Pre-activity: Granola bar (220 cal)', 'Lunch: Pasta + beef (660 cal)', 'Snack: Banana + honey (180 cal)', 'Dinner: Lean meat + vegetables (610 cal)'],
                    Thursday: ['Breakfast: Pancakes + syrup (620 cal)', 'Pre-run: Fruit (100 cal)', 'Lunch: Brown rice + salmon (650 cal)', 'Post-run: Shake (320 cal)', 'Dinner: Chicken + potatoes (630 cal)'],
                    Friday: ['Breakfast: Toast + eggs (610 cal)', 'Snack: Energy drink (150 cal)', 'Lunch: Quinoa + turkey (670 cal)', 'Snack: Dates + nuts (200 cal)', 'Dinner: Fish + rice (620 cal)'],
                    Saturday: ['Breakfast: High carb meal (650 cal)', 'Pre-event: Carb load (300 cal)', 'During: Sports drink (300 cal)', 'Recovery: Protein shake (350 cal)', 'Dinner: Complete meal (700 cal)'],
                    Sunday: ['Breakfast: Recovery meal (600 cal)', 'Snack: Fruit smoothie (250 cal)', 'Lunch: Balanced meal (660 cal)', 'Snack: Yogurt (150 cal)', 'Dinner: Light meal (550 cal)']
                }
            };

            const plan = dietPlans[p.goal] || dietPlans['maintenance'];
            const html = Object.entries(plan).map(([day, meals]) => `
                <div class="day-card">
                    <div class="day-header">${day}</div>
                    <ul class="day-content">
                        ${meals.map(meal => `<li>üçΩÔ∏è ${meal}</li>`).join('')}
                    </ul>
                </div>
            `).join('');

            document.getElementById("dietSchedule").innerHTML = html;
        }

        // Generate Nutrition Tips
        function generateNutritionTips() {
            const p = currentUser.profile;
            const tips = `
                <div class="day-card">
                    <div class="day-header">üìã Personalized Nutrition Guide</div>
                    <ul class="day-content">
                        <li><strong>Daily Calorie Target:</strong> ${p.dailyCalories} kcal</li>
                        <li><strong>Your Goal:</strong> ${capitalizeGoal(p.goal)}</li>
                        <li><strong>Current BMI:</strong> ${p.bmi} (${getBMIStatus(p.bmi)})</li>
                        <li style="border-bottom: 2px solid rgba(0,255,100,0.3); padding: 10px 0; margin: 10px 0;"></li>
                        <li><strong>Protein:</strong> ${getProteinRecommendation(p)} grams/day</li>
                        <li><strong>Carbs:</strong> ${getCarbsRecommendation(p)} grams/day</li>
                        <li><strong>Fats:</strong> ${getFatsRecommendation(p)} grams/day</li>
                        <li style="border-bottom: 2px solid rgba(0,255,100,0.3); padding: 10px 0; margin: 10px 0;"></li>
                        <li>üíß Drink 3-4 liters of water daily</li>
                        <li>ü•ó Eat vegetables with every meal</li>
                        <li>‚è∞ Maintain consistent meal times</li>
                        <li>üìä Track your progress weekly</li>
                        <li>üò¥ Sleep 7-9 hours for recovery</li>
                        <li>üèÉ Combine diet with your workout plan</li>
                    </ul>
                </div>
            `;

            document.getElementById("nutritionTips").innerHTML = tips;
        }

        function getProteinRecommendation(p) {
            if (p.goal === 'muscle-gain') return Math.round(p.weight * 2.2);
            if (p.goal === 'weight-loss') return Math.round(p.weight * 1.8);
            if (p.goal === 'endurance') return Math.round(p.weight * 1.6);
            return Math.round(p.weight * 1.2);
        }

        function getCarbsRecommendation(p) {
            const carbCalories = p.dailyCalories * 0.45;
            return Math.round(carbCalories / 4);
        }

        function getFatsRecommendation(p) {
            const fatCalories = p.dailyCalories * 0.25;
            return Math.round(fatCalories / 9);
        }

        // Tab Switching
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');

            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Capitalize Goal
        function capitalizeGoal(goal) {
            return goal.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
        }

        // Logout
        function logout() {
            currentUser = null;
            localStorage.removeItem('genfit_currentUser');
            document.getElementById("authPage").classList.remove("hidden");
            document.getElementById("profilePage").classList.add("hidden");
            document.getElementById("plansPage").classList.add("hidden");
            clearForms();
        }

        // Clear Forms
        function clearForms() {
            document.getElementById("signupName").value = "";
            document.getElementById("signupEmail").value = "";
            document.getElementById("signupPassword").value = "";
            document.getElementById("confirmPassword").value = "";
            document.getElementById("loginEmail").value = "";
            document.getElementById("loginPassword").value = "";
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            const savedUser = localStorage.getItem('genfit_currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                if (currentUser.profile) {
                    showPlansPage();
                } else {
                    showProfilePage();
                }
            }
        });
    </script>
</body>
</html>
